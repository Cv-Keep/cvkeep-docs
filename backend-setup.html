<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<title data-react-helmet="true">Backend Setup | CvKeep Docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://cvkeep.github.io/cvkeep-docs/backend-setup"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Backend Setup | CvKeep Docs"><meta data-react-helmet="true" name="description" content="To setup the Cv Keep API you will need MongoDB running on your machine, then create a new database and get its Mongo URI, you gonna need it. With MongoDB configured and the database URI available, follow the next steps. If you didnt cloned the Cv Keep Backend project, please, read the section Requirements of this documentation."><meta data-react-helmet="true" property="og:description" content="To setup the Cv Keep API you will need MongoDB running on your machine, then create a new database and get its Mongo URI, you gonna need it. With MongoDB configured and the database URI available, follow the next steps. If you didnt cloned the Cv Keep Backend project, please, read the section Requirements of this documentation."><link data-react-helmet="true" rel="shortcut icon" href="cvkeep-docs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://cvkeep.github.io/cvkeep-docs/backend-setup"><link data-react-helmet="true" rel="alternate" href="https://cvkeep.github.io/cvkeep-docs/backend-setup" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://cvkeep.github.io/cvkeep-docs/backend-setup" hreflang="x-default"><link rel="stylesheet" href="cvkeep-docs/assets/css/styles.0c1eb2ef.css">
<link rel="preload" href="cvkeep-docs/assets/js/runtime~main.311edeba.js" as="script">
<link rel="preload" href="cvkeep-docs/assets/js/main.01a9b32b.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cvkeep-docs/cvkeep-docs/"><img src="cvkeep-docs/img/logo.png" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="cvkeep-docs/img/logo.png" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Cv Keep</b></a></div><div class="navbar__items navbar__items--right"><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/cvkeep-docs/cvkeep-docs/">Cv Keep</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/cvkeep-docs/cvkeep-docs/license">License</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/cvkeep-docs/cvkeep-docs/requirements">Requirements</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/cvkeep-docs/cvkeep-docs/backend-setup">Backend Setup</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/cvkeep-docs/cvkeep-docs/frontend-setup">Frontend Setup</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/cvkeep-docs/cvkeep-docs/running-locally">Running Locally</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/cvkeep-docs/cvkeep-docs/deploying">Deploying</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/cvkeep-docs/cvkeep-docs/internationalization">Internationalization</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/cvkeep-docs/cvkeep-docs/the-database">The Database</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Backend Setup</h1></header><p>To setup the Cv Keep API you will need MongoDB running on your machine, then create a new database and get its Mongo URI, you gonna need it. With MongoDB configured and the database URI available, follow the next steps. If you didnt cloned the <strong>Cv Keep Backend</strong> project, please, read the section <a href="/cvkeep-docs/cvkeep-docs/requirements">Requirements</a> of this documentation. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="the-env-files"></a>The .Env Files<a class="hash-link" href="#the-env-files" title="Direct link to heading">#</a></h3><p>To run your project locally or in production, you will need to set a .env file based on your state. The cvkeep-backend project has 4 .env files</p><table><thead><tr><th>Env File</th><th>Description</th></tr></thead><tbody><tr><td>.env</td><td>a simple example, ignored by all environments</td></tr><tr><td>.env.local</td><td>must be created by you to define the local environment env vars</td></tr><tr><td>.env.production</td><td>must be created by you to defined the production environment vars</td></tr><tr><td>.env.test</td><td>setup environment vars for automated tests</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="the-env-vars"></a>The .Env Vars<a class="hash-link" href="#the-env-vars" title="Direct link to heading">#</a></h3><p>The <strong>cvkeep-backend</strong> environment variables are:</p><table><thead><tr><th>Name</th><th>Description</th><th>Default</th><th>Required</th></tr></thead><tbody><tr><td>BASE</td><td>The API base route to deliver the API. The default the application root, if you defined <code>/fizz</code> for example, the entire API you respond after /fizz/*</td><td>/</td><td>true</td></tr><tr><td>PORT</td><td>The API port to deliver the application. You can ommit this information on your env in some hosts that sets ports automatically, like heroku for example. That doesnt mean you dont need a PORT env, only that was automatically setted</td><td>5000</td><td>true</td></tr><tr><td>DEFAULT_LANG</td><td>The default language that the API must use for human readable messages. By default, &quot;pt-br&quot; and &quot;en&quot; are available</td><td>en</td><td>true</td></tr><tr><td>BRAND_NAME</td><td>The brand name to use when refering to your application in messages and emails, for example</td><td>Cv Keep</td><td>true</td></tr><tr><td>EXTRA_ALLOWED_ORIGINS</td><td>The cvkeep api uses strict CORS to validate requests. Here you can allow other Origins to connect to your API. You must set the origins separeted by spaces and consider complete URLs and its possible versions, for example: &quot;<a href="https://www.otherorigin.com" target="_blank" rel="noopener noreferrer">https://www.otherorigin.com</a> <a href="https://otherorigin.com%22" target="_blank" rel="noopener noreferrer">https://otherorigin.com&quot;</a></td><td>&quot;&quot;</td><td>false</td></tr><tr><td>CLIENT_URL</td><td>The Cv Keep frontend URL of the current environment</td><td>https://localhost:8080</td><td>true</td></tr><tr><td>SERVER_URL</td><td>The Cv Keep backend URL of the current environment</td><td>http://localhost:5000</td><td>true</td></tr><tr><td>UPLOAD_MAX_FILE_SIZE_MB</td><td>How big an image can be when being uploaded</td><td>10</td><td>true</td></tr><tr><td>JWT_COOKIE_NAME</td><td>The JWT token is stored on a Cookie, here you can setup this cookie name. If for some reason you need to invalidade all the sessions, you can only change the cookie name and all the old ones will be ignored be the application. The cookie used is a signed Cookie to prevent injection attacks</td><td>__CV_APP_SESSION_0001__</td><td>true</td></tr><tr><td>REPORT_EMAIL_ADDRESS</td><td>All the problems reported by users on the application will be sent to this email address</td><td><a href="mailto:report@email.com" target="_blank" rel="noopener noreferrer">report@email.com</a></td><td>true</td></tr><tr><td>NOREPLY_EMAIL_ADDRESS</td><td>A simple noreply E-Mail for application routines like password changing, for example</td><td><a href="mailto:noreply@email.com" target="_blank" rel="noopener noreferrer">noreply@email.com</a></td><td>true</td></tr><tr><td>SOCIAL_AUTH_GITHUB_CLIENT_ID</td><td>If you intend to support github login you must fill it</td><td>&quot;&quot;</td><td>false</td></tr><tr><td>SOCIAL_AUTH_GITHUB_CLIENT_SECRET</td><td>If you intend to support github login you must fill it</td><td>&quot;&quot;</td><td>false</td></tr><tr><td>MONGODB_URI</td><td>Your MongoDB Database URI</td><td>mongodb://localhost:27017/cvkeep</td><td>true</td></tr><tr><td>APP_SECRET</td><td>This must be a big random STR to be used as secret and salt for some operations. We recommend at least a 450 chars string</td><td>A 450 chars random string</td><td>true</td></tr><tr><td>MAILER_CONFIG</td><td>A JSON containing the application SMTP config, needed only for production mode</td><td>true</td><td></td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="the-smtp"></a>The SMTP<a class="hash-link" href="#the-smtp" title="Direct link to heading">#</a></h3><p>The application SMTP configuration is used to allow the application send e-mails. If you are in local mode, you dont need to configure it, all the sent emails will be directed to the Console (STD) and wont be really sent. But in production mode you must setup it. The SMTP configuration is setted on the <strong>MAILER_CONFIG</strong> environment variable of your .env files (prefered the .env.production file). The env var content must be a JSON string with no line breaks like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">{ &quot;service&quot;: &quot;Service&quot;, &quot;host&quot;: &quot;smtp.service.com&quot;, &quot;port&quot;: 465, &quot;secure&quot;: true, &quot;auth&quot;: { &quot;user&quot;: &quot;user@service.com&quot;, &quot;pass&quot;: &quot;p2$$w05d&quot; } }</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The configuration above is very common: an SMTP service authenticated by user and password. If you need alternative configurations, you can pass any property accepted by the <strong>nodemailer</strong> configuration. You can checkout the nodemailer docs here: <a href="https://www.npmjs.com/package/nodemailer" target="_blank" rel="noopener noreferrer">https://www.npmjs.com/package/nodemailer</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="the-jwt-rsa"></a>The JWT RSA<a class="hash-link" href="#the-jwt-rsa" title="Direct link to heading">#</a></h3><p>The JWT tokens are protected by a RS256 RSA Key Pair with length 4096. This RSA is dynamically generated for you application at the first time you run it and stored on the database. If you need to invalidate all the tokens and their keys, you can go to you database, at the collection <strong>jwtsecrets</strong> and the delete the content of the fields <strong>publicKey</strong> and <strong>privateKey</strong>. After that, restart the application and a new RSA will be generated for you and all the old JWT tokens will be invalidated</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Cv-Keep/cvkeep-docs/edit/master/docs/docs/backend-setup.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/cvkeep-docs/cvkeep-docs/requirements"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Requirements</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/cvkeep-docs/cvkeep-docs/frontend-setup"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Frontend Setup Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-env-files" class="table-of-contents__link">The .Env Files</a></li><li><a href="#the-env-vars" class="table-of-contents__link">The .Env Vars</a></li><li><a href="#the-smtp" class="table-of-contents__link">The SMTP</a></li><li><a href="#the-jwt-rsa" class="table-of-contents__link">The JWT RSA</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Cv Keep.</div></div></div></footer></div>
<script src="cvkeep-docs/assets/js/runtime~main.311edeba.js"></script>
<script src="cvkeep-docs/assets/js/main.01a9b32b.js"></script>
</body>
</html>